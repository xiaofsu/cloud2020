# 服务降级

## 1：Hystrix

Hystrix 是一个用于处理分布式系统的延迟和容错的开源库，在分布式系统里，许多依赖不可避免的会调用失败，比如超时，异常等。Hystrix能够保证在某个依赖发生问题的情况下，不会导致服务的整体失败，避免级联鼓掌，提高分布式系统的弹性。

### 服务降级-->FallBack

假设某服务不可用，需要提供一个兜底的服务来进行处理。例如服务器不可用，返回客户端一个友好提示。

例如：程序异常，超时，服务熔断触发服务降级，线程池满或者信号量打满也会导致服务降级。

### 服务熔断-->Break

类似于保险丝，当达到最大服务访问量之后，直接拒绝访问，调用服务降级方法并返回友好提示，保证服务器可以正常运行。

### 服务限流-->FlowLimit

某些高并发操作，同时进入到服务器层面，需要进行排序，有序进行处理。



## 熔断机制概述

熔断机制是应对雪崩效应的一种为服务链路保护机制，当扇出链路的某个服务出错不可用或者响应时间过长时，会进行服务的降级，进而熔断该节点微服务的调用，快速返回错误的响应信息。

当检测到该节点微服务调用响应正常后，恢复调用链路。

在Spring Cloud中，熔断机制使用Hystrix实现，Hystrix会监控微服务之间调用的情况，当失败的调用到一定的阈值，默认为5秒20次调用失败，就会启动熔断机制，熔断机制的注解为：@HystrixConnand







